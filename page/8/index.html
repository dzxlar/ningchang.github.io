<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="dzxblog">
<meta property="og:url" content="http://yoursite.com/page/8/index.html">
<meta property="og:site_name" content="dzxblog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dzxblog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/8/"/>





  <title>dzxblog</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">dzxblog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/docker真实应用场景/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/docker真实应用场景/" itemprop="url">docker真实应用场景</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:44:29+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/docker/" itemprop="url" rel="index">
                    <span itemprop="name">docker</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>简化配置、代码流水线管理、提高开发效率、隔离应用、整合服务器、调试能力、多租户环境、快速部署分别是docker的8个使用场景</p>
</blockquote>
<p><img src="http://dockerone.com/uploads/article/20150106/802e00800b6dca3038b072bffdd56e15.png" alt="这里写图片描述"></p>
<h3 id="Docker特性"><a href="#Docker特性" class="headerlink" title="Docker特性"></a>Docker特性</h3><ul>
<li>Docker提供了轻量级的虚拟化 </li>
<li>在同一台机器上创建更多数量的容器</li>
<li>容器的启动与停止都能在几秒中内完成</li>
</ul>
<hr>
<h3 id="1-简化配置"><a href="#1-简化配置" class="headerlink" title="1. 简化配置"></a>1. 简化配置</h3><blockquote>
<p>这是Docker公司宣传的Docker的主要使用场景。虚拟机的最大好处是能在你的硬件设施上运行各种配置不一样的平台（软件、系统），<strong>Docker在降低额外开销的情况下提供了同样的功能。它能让你将运行环境和配置放在代码中然后部署</strong>，同一个Docker的配置可以在不同的环境中使用，这样就降低了硬件要求和应用环境之间耦合度。</p>
</blockquote>
<h3 id="2-代码流水线（Code-Pipeline）管理"><a href="#2-代码流水线（Code-Pipeline）管理" class="headerlink" title="2. 代码流水线（Code Pipeline）管理"></a>2. 代码流水线（Code Pipeline）管理</h3><blockquote>
<p>前一个场景对于管理代码的流水线起到了很大的帮助。代码从开发者的机器到最终在生产环境上的部署，需要经过很多的中间环境。而每一个中间环境都有自己微小的差别，<strong>Docker给应用提供了一个从开发到上线均一致的环境，让代码的流水线变得简单不少。</strong></p>
</blockquote>
<h3 id="3-提高开发效率"><a href="#3-提高开发效率" class="headerlink" title="3. 提高开发效率"></a>3. 提高开发效率</h3><blockquote>
<p>不同的开发环境中，我们都想把两件事做好。<strong>一是我们想让开发环境尽量贴近生产环境，二是我们想快速搭建开发环境。</strong><br>理想状态中，要达到第一个目标，我们需要将每一个服务都跑在独立的虚拟机中以便监控生产环境中服务的运行状态。然而，我们却不想每次都需要网络连接，每次重新编译的时候远程连接上去特别麻烦。这就是Docker做的特别好的地方，开发环境的机器通常内存比较小，之前使用虚拟的时候，我们经常需要为开发环境的机器加内存，而现在Docker可以轻易的让几十个服务在Docker中跑起来。</p>
</blockquote>
<h3 id="4-隔离应用"><a href="#4-隔离应用" class="headerlink" title="4. 隔离应用"></a>4. 隔离应用</h3><blockquote>
<p><strong>有很多种原因会让你选择在一个机器上运行不同的应用</strong>，比如之前提到的提高开发效率的场景等。<br>我们经常需要考虑两点，一是因为要降低成本而进行服务器整合，二是将一个整体式的应用拆分成松耦合的单个服务（译者注：微服务架构）。</p>
</blockquote>
<h3 id="5-整合服务器"><a href="#5-整合服务器" class="headerlink" title="5. 整合服务器"></a>5. 整合服务器</h3><blockquote>
<p>正如通过虚拟机来整合多个应用，<strong>Docker隔离应用的能力使得Docker可以整合多个服务器以降低成本。由于没有多个操作系统的内存占用，以及能在多个实例之间共享没有使用的内存</strong>，Docker可以比虚拟机提供更好的服务器整合解决方案。</p>
</blockquote>
<h3 id="6-调试能力"><a href="#6-调试能力" class="headerlink" title="6. 调试能力"></a>6. 调试能力</h3><blockquote>
<p>Docker提供了很多的工具，这些工具不一定只是针对容器，但是却适用于容器。它们提供了很多的功能，包括可以为容器设置检查点、设置版本和查看两个容器之间的差别，这些特性可以帮助调试Bug。</p>
</blockquote>
<h3 id="7-多租户环境"><a href="#7-多租户环境" class="headerlink" title="7. 多租户环境"></a>7. 多租户环境</h3><blockquote>
<p>另外一个Docker有意思的使用场景是在多租户的应用中，它可以避免关键应用的重写。我们一个特别的关于这个场景的例子是为IoT（译者注：物联网）的应用开发一个快速、易用的多租户环境。这种多租户的基本代码非常复杂，很难处理，重新规划这样一个应用不但消耗时间，也浪费金钱。<br>使用Docker，可以为每一个租户的应用层的多个实例创建隔离的环境，这不仅简单而且成本低廉，当然这一切得益于Docker环境的启动速度和其高效的diff命令。</p>
</blockquote>
<h3 id="8-快速部署"><a href="#8-快速部署" class="headerlink" title="8. 快速部署"></a>8. 快速部署</h3><blockquote>
<p>在虚拟机之前，引入新的硬件资源需要消耗几天的时间。虚拟化技术（Virtualization）将这个时间缩短到了分钟级别。而Docker通过为进程仅仅创建一个容器而无需启动一个操作系统，再次将这个过程缩短到了秒级。</p>
</blockquote>
<hr>
<p><a href="http://dockone.io/article/126" target="_blank" rel="external">译文转载</a><br><a href="http://blog.flux7.com/blogs/docker/8-ways-to-use-docker-in-the-real-world" target="_blank" rel="external">原文出处</a><br><a href="http://dockone.io/" target="_blank" rel="external">docker论坛</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/【Java8】new-date-api/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/【Java8】new-date-api/" itemprop="url">【Java8】new date api</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:43:21+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/java8/" itemprop="url" rel="index">
                    <span itemprop="name">java8</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div></pre></td><td class="code"><pre><div class="line">LocalDate yMd = LocalDate.of(2017, 4, 1);</div><div class="line">System.out.println(yMd);</div><div class="line">System.out.println(yMd.getYear());</div><div class="line">System.out.println(yMd.getMonth());</div><div class="line">System.out.println(yMd.getDayOfMonth());</div><div class="line">System.out.println(yMd.getDayOfYear());</div><div class="line">System.out.println(yMd.getDayOfWeek());</div><div class="line">System.out.println(yMd.isLeapYear());</div><div class="line">System.out.println(yMd.lengthOfMonth());</div><div class="line">System.out.println(yMd.lengthOfYear());</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">LocalDate today = LocalDate.now();</div><div class="line">System.out.println(today);</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">System.out.println(yMd.get(ChronoField.YEAR));</div><div class="line">System.out.println(yMd.get(ChronoField.MONTH_OF_YEAR));</div><div class="line">System.out.println(yMd.get(ChronoField.DAY_OF_MONTH));</div><div class="line">System.out.println(yMd.get(ChronoField.DAY_OF_WEEK));</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">LocalTime hMs = LocalTime.of(17, 50, 10);</div><div class="line">System.out.println(hMs);</div><div class="line">System.out.println(hMs.getHour());</div><div class="line">System.out.println(hMs.getMinute());</div><div class="line">System.out.println(hMs.getSecond());</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">LocalDate parseDate = LocalDate.parse(&quot;2017-04-05&quot;);</div><div class="line">LocalTime parseTime = LocalTime.parse(&quot;18:10:10&quot;);</div><div class="line">System.out.println(parseDate);</div><div class="line">System.out.println(parseTime);</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">LocalDateTime yMdhMs = LocalDateTime.of(yMd, hMs);</div><div class="line">LocalDateTime athMs = yMd.atTime(hMs);</div><div class="line">LocalDateTime atyMd = hMs.atDate(yMd);</div><div class="line">System.out.println(athMs);</div><div class="line">System.out.println(atyMd);</div><div class="line">System.out.println(yMdhMs);</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">LocalDate toDate = yMdhMs.toLocalDate();</div><div class="line">LocalTime toTime = yMdhMs.toLocalTime();</div><div class="line">System.out.println(toDate);</div><div class="line">System.out.println(toTime);</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">System.out.println(Instant.ofEpochSecond(3));</div><div class="line">System.out.println(Instant.ofEpochSecond(2,1_000_000_000));</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">Duration ofMin = Duration.ofMinutes(3);</div><div class="line">Duration of = Duration.of(3, ChronoUnit.MINUTES);</div><div class="line"></div><div class="line">System.out.println(ofMin);</div><div class="line">System.out.println(of);</div><div class="line"></div><div class="line">Period ofDay = Period.ofDays(10);</div><div class="line">Period ofWeek = Period.ofWeeks(3);</div><div class="line">Period yearMonthDay = Period.of(2, 6, 1);//2年6个月1天</div><div class="line"></div><div class="line">System.out.println(ofDay);</div><div class="line">System.out.println(ofWeek);</div><div class="line">System.out.println(yearMonthDay);</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">LocalDate editDate = LocalDate.of(2017, 4, 10);</div><div class="line"></div><div class="line">System.out.println(editDate);</div><div class="line">System.out.println(editDate.withYear(2020));</div><div class="line">System.out.println(editDate.withMonth(7));</div><div class="line">System.out.println(editDate.with(ChronoField.DAY_OF_MONTH,7));</div><div class="line"></div><div class="line">System.out.println(editDate.plusWeeks(1));</div><div class="line">System.out.println(editDate.minusWeeks(3));</div><div class="line">System.out.println(editDate.plus(10,ChronoUnit.MONTHS));</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">LocalDate tempDate = LocalDate.of(2017, 4, 6);</div><div class="line"></div><div class="line">System.out.println(tempDate.with(nextOrSame(DayOfWeek.SUNDAY)));</div><div class="line">System.out.println(tempDate.with(lastDayOfMonth()));</div><div class="line">	</div><div class="line">LocalDate lambdaDate = tempDate.with(temporal -&gt; &#123;</div><div class="line">	DayOfWeek dow = DayOfWeek.of(temporal.get(ChronoField.DAY_OF_WEEK));</div><div class="line">	int dayToAdd = 1;</div><div class="line">	if(dow == DayOfWeek.THURSDAY) dayToAdd = 3;</div><div class="line">	else if(dow == DayOfWeek.WEDNESDAY) dayToAdd = 2;</div><div class="line">	return temporal.plus(dayToAdd,ChronoUnit.DAYS);</div><div class="line">&#125;);</div><div class="line">System.out.println(lambdaDate);</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd hh:MM:ss&quot;);</div><div class="line">LocalDateTime date = LocalDateTime.of(yMd, hMs);</div><div class="line">String formatDate = dtf.format(date);</div><div class="line">System.out.println(formatDate);</div><div class="line">   </div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">DateTimeFormatter formatter = </div><div class="line">		new DateTimeFormatterBuilder()</div><div class="line">	    .appendText(ChronoField.DAY_OF_MONTH)</div><div class="line">	    .appendLiteral(&quot;.&quot;)</div><div class="line">	    .appendText(ChronoField.MONTH_OF_YEAR)</div><div class="line">	    .appendLiteral(&quot;.&quot;)</div><div class="line">	    .appendText(ChronoField.YEAR)</div><div class="line">	    .parseCaseInsensitive()</div><div class="line">	    .toFormatter(Locale.ITALIAN);</div><div class="line">System.out.println(formatter.format(date));</div><div class="line"></div><div class="line">System.out.println(&quot;==========================&quot;);</div><div class="line"></div><div class="line">ZoneId zoneId = TimeZone.getDefault().toZoneId();</div><div class="line">System.out.println(zoneId);</div></pre></td></tr></table></figure>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line">2017-04-01</div><div class="line">2017</div><div class="line">APRIL</div><div class="line">1</div><div class="line">91</div><div class="line">SATURDAY</div><div class="line">false</div><div class="line">30</div><div class="line">365</div><div class="line">==========================</div><div class="line">2017-04-06</div><div class="line">==========================</div><div class="line">2017</div><div class="line">4</div><div class="line">1</div><div class="line">6</div><div class="line">==========================</div><div class="line">17:50:10</div><div class="line">17</div><div class="line">50</div><div class="line">10</div><div class="line">==========================</div><div class="line">2017-04-05</div><div class="line">18:10:10</div><div class="line">==========================</div><div class="line">2017-04-01T17:50:10</div><div class="line">2017-04-01T17:50:10</div><div class="line">2017-04-01T17:50:10</div><div class="line">==========================</div><div class="line">2017-04-01</div><div class="line">17:50:10</div><div class="line">==========================</div><div class="line">1970-01-01T00:00:03Z</div><div class="line">1970-01-01T00:00:03Z</div><div class="line">==========================</div><div class="line">PT3M</div><div class="line">PT3M</div><div class="line">P10D</div><div class="line">P21D</div><div class="line">P2Y6M1D</div><div class="line">==========================</div><div class="line">2017-04-10</div><div class="line">2020-04-10</div><div class="line">2017-07-10</div><div class="line">2017-04-07</div><div class="line">2017-04-17</div><div class="line">2017-03-20</div><div class="line">2018-02-10</div><div class="line">==========================</div><div class="line">2017-04-09</div><div class="line">2017-04-30</div><div class="line">2017-04-09</div><div class="line">==========================</div><div class="line">2017-04-01 05:04:10</div><div class="line">==========================</div><div class="line">1.aprile.2017</div><div class="line">==========================</div><div class="line">Asia/Shanghai</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/Java各种对象名称详解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/Java各种对象名称详解/" itemprop="url">Java各种对象名称详解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:41:55+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Object/" itemprop="url" rel="index">
                    <span itemprop="name">Object</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="PO-persistant-object-持久对象"><a href="#PO-persistant-object-持久对象" class="headerlink" title="PO(persistant object) 持久对象"></a>PO(persistant object) 持久对象</h2><blockquote>
<p>在 <strong>o/r 映射</strong>的时候出现的概念，如果没有 o/r 映射，没有这个概念存在了。<strong>通常对应数据模型 ( 数据库 ), 本身还有部分业务逻辑的处理。可以看成是与数据库中的表相映射的 java 对象。</strong>最简单的 PO 就是对应数据库中某个表中的一条记录，多个记录可以用 PO 的集合。 PO 中应该不包含任何对数据库的操作。</p>
</blockquote>
<p>##DO（Domain Object）领域对象</p>
<blockquote>
<p>就是从现实世界中抽象出来的有形或无形的业务实体。<strong>一般和数据中的表结构对应。</strong></p>
</blockquote>
<h2 id="TO-Transfer-Object"><a href="#TO-Transfer-Object" class="headerlink" title="TO(Transfer Object)"></a>TO(Transfer Object)</h2><blockquote>
<p>数据传输对象<br>在应用程序不同 tie( 关系 ) 之间传输的对象</p>
</blockquote>
<h2 id="DTO（Data-Transfer-Object）数据传输对象"><a href="#DTO（Data-Transfer-Object）数据传输对象" class="headerlink" title="DTO（Data Transfer Object）数据传输对象"></a>DTO（Data Transfer Object）数据传输对象</h2><blockquote>
<p>这个概念来源于J2EE的设计模式，原来的目的是为了EJB的分布式应用提供粗粒度的数据实体，以减少分布式调用的次数，从而提高分布式调用的性能和降低网络负载，但在这里，我泛指用于展示层与服务层之间的数据传输对象。</p>
</blockquote>
<h2 id="VO-view-object-值对象"><a href="#VO-view-object-值对象" class="headerlink" title="VO(view object) 值对象"></a>VO(view object) 值对象</h2><blockquote>
<p>视图对象，用于展示层，它的作用是把某个指定页面（或组件）的所有数据封装起来。</p>
</blockquote>
<p>##BO(business object) 业务对象</p>
<blockquote>
<p>从业务模型的角度看 , 见 UML 元件领域模型中的领域对象。封装业务逻辑的 java 对象 , 通过调用 DAO 方法 , 结合 PO,VO 进行业务操作。 business object: 业务对象 主要作用是把业务逻辑封装为一个对象。这个对象可以包括一个或多个其它的对象。 比如一个简历，有教育经历、工作经历、社会关系等等。 我们可以把教育经历对应一个 PO ，工作经历对应一个 PO ，社会关系对应一个 PO 。 建立一个对应简历的 BO 对象处理简历，每个 BO 包含这些 PO 。 这样处理业务逻辑时，我们就可以针对 BO 去处理。</p>
</blockquote>
<h2 id="POJO-plain-ordinary-java-object-简单无规则-java-对象"><a href="#POJO-plain-ordinary-java-object-简单无规则-java-对象" class="headerlink" title="POJO(plain ordinary java object) 简单无规则 java 对象"></a>POJO(plain ordinary java object) 简单无规则 java 对象</h2><blockquote>
<p>纯的传统意义的 java 对象。就是说在一些 Object/Relation Mapping 工具中，能够做到维护数据库表记录的 persisent object 完全是一个符合 Java Bean 规范的纯 Java 对象，没有增加别的属性和方法。我的理解就是最基本的 Java Bean ，只有属性字段及 setter 和 getter 方法！。</p>
</blockquote>
<h2 id="DAO-data-access-object-数据访问对象"><a href="#DAO-data-access-object-数据访问对象" class="headerlink" title="DAO(data access object) 数据访问对象"></a>DAO(data access object) 数据访问对象</h2><blockquote>
<p>是一个 sun 的一个标准 j2ee 设计模式， 这个模式中有个接口就是 DAO ，它负持久层的操作。为业务层提供接口。此对象用于访问数据库。通常和 PO 结合使用， DAO 中包含了各种数据库的操作方法。通过它的方法 , 结合 PO 对数据库进行相关的操作。夹在业务逻辑与数据库资源中间。配合 VO, 提供数据库的 CRUD 操作</p>
</blockquote>
<p><a href="http://www.hollischuang.com/archives/553" target="_blank" rel="external">原文转自</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/线程笔记——LockSupport/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/线程笔记——LockSupport/" itemprop="url">线程笔记——LockSupport</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:41:08+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/多线程/" itemprop="url" rel="index">
                    <span itemprop="name">多线程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="LockSupport"><a href="#LockSupport" class="headerlink" title="LockSupport"></a>LockSupport</h2><p><img src="http://img.blog.csdn.net/20170410090804136?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>LocalSupport类特性</p>
<ul>
<li><p>不可实例化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">private LockSupport() &#123;&#125; // Cannot be instantiated.</div></pre></td></tr></table></figure>
</li>
<li><p>LockSupport的方法都是静态方法</p>
</li>
<li><p>私有变量</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">private static final sun.misc.Unsafe UNSAFE;</div><div class="line">   private static final long parkBlockerOffset;</div></pre></td></tr></table></figure>
<h2 id="私有变量-unsafe"><a href="#私有变量-unsafe" class="headerlink" title="私有变量:unsafe"></a>私有变量:unsafe</h2><blockquote>
<ol>
<li><strong>sun.misc.Unsafe</strong>可以直接操控内存。被JDK广泛用于自己的包中，如java.nio和java.util.concurrent</li>
<li>API十分不安全、不轻便、而且不稳定。不建议在生产环境中使用</li>
<li>这个不安全的类提供了一个观察HotSpot JVM内部结构并且可以对其进行修改。有时它可以被用来在不适用C++调试的情况下学习虚拟机内部结构，有时也可以被拿来做性能监控和开发工具</li>
</ol>
</blockquote>
<h2 id="私有变量-parkBlockerOffset"><a href="#私有变量-parkBlockerOffset" class="headerlink" title="私有变量: parkBlockerOffset"></a>私有变量: parkBlockerOffset</h2><ul>
<li>被LockSupport的setBlocker和getBlocker调用</li>
<li>这个对象是用来记录线程被阻塞时被谁阻塞的，用于线程监控和分析工具来定位原因</li>
</ul>
<h2 id="LockSupport-java"><a href="#LockSupport-java" class="headerlink" title="LockSupport.java"></a>LockSupport.java</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 通过反射机制获取Thread类的parkBlocker字段对象。然后通过   </div><div class="line"> * sun.misc.Unsafe对象的objectFieldOffset方法获取到</div><div class="line"> * parkBlocker在内存里的偏移量</div><div class="line"> */</div><div class="line">parkBlockerOffset = UNSAFE.objectFieldOffset</div><div class="line">                (tk.getDeclaredField(&quot;parkBlocker&quot;));</div></pre></td></tr></table></figure>
<h2 id="Thread-java"><a href="#Thread-java" class="headerlink" title="Thread.java"></a>Thread.java</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">    * The argument supplied to the current call to</div><div class="line">    * java.util.concurrent.locks.LockSupport.park.</div><div class="line">    * Set by (private) java.util.concurrent.locks.LockSupport.setBlocker</div><div class="line">    * Accessed using java.util.concurrent.locks.LockSupport.getBlocker</div><div class="line">    */</div><div class="line">   volatile Object parkBlocker;</div></pre></td></tr></table></figure>
<blockquote>
<p>JVM的实现可以自由选择如何实现Java对象的“布局”，也就是在内存里Java对象的各个部分放在哪里，包括对象的实例字段和一些元数据等。<br>sun.misc.Unsafe里关于对象字段访问的方法把对象布局抽象出来，它提供了objectFieldOffset()方法用于获取某个字段相对 Java对象的“起始地址”的偏移量，也提供了getInt、getLong、getObject之类的方法可以使用前面获取的偏移量来访问某个Java 对象的某个字段</p>
</blockquote>
<p><strong>为什么要用偏移量来获取对象？不直接调用get/set方法？</strong></p>
<blockquote>
<p>parkBlocker就是在线程处于阻塞的情况下才会被赋值。线程都已经阻塞了，如果不通过这种内存的方法，而是直接调用线程内的方法，线程是不会回应调用的</p>
</blockquote>
<hr>
<h2 id="LockSupport-Method"><a href="#LockSupport-Method" class="headerlink" title="LockSupport Method"></a>LockSupport Method</h2><ul>
<li>LockSupport中有且只有一个私有方法<ul>
<li><strong>对给定线程t的parkBlocker赋值。为了防止这个parkBlocker被误用，该方法是不对外公开的</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">private static void setBlocker(Thread t, Object arg) &#123;</div><div class="line">        // Even though volatile, hotspot doesn&apos;t need a write barrier here.</div><div class="line">        UNSAFE.putObject(t, parkBlockerOffset, arg);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<p>参数</p>
<ul>
<li>Thread t 需要被赋值Blocker的线程</li>
<li>Object arg 具体的Blocker对象</li>
</ul>
<hr>
<ul>
<li>从线程t中获取它的parkBlocker对象，即返回的是阻塞线程t的Blocker对象<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public static Object getBlocker(Thread t) &#123;  </div><div class="line">    if (t == null)  </div><div class="line">        throw new NullPointerException();  </div><div class="line">    return unsafe.getObjectVolatile(t, parkBlockerOffset);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="以park开头的方法，用于阻塞线程"><a href="#以park开头的方法，用于阻塞线程" class="headerlink" title="以park开头的方法，用于阻塞线程"></a>以park开头的方法，用于阻塞线程</h3><p><strong>带blocker参数的park方法</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">public static void park(Object blocker) &#123;</div><div class="line">        Thread t = Thread.currentThread();</div><div class="line">        setBlocker(t, blocker);</div><div class="line">        UNSAFE.park(false, 0L);</div><div class="line">        setBlocker(t, null);</div><div class="line">&#125;</div><div class="line"></div><div class="line">public static void parkNanos(Object blocker, long nanos) &#123;</div><div class="line">        if (nanos &gt; 0) &#123;</div><div class="line">            Thread t = Thread.currentThread();</div><div class="line">            setBlocker(t, blocker);</div><div class="line">            UNSAFE.park(false, nanos);</div><div class="line">            setBlocker(t, null);</div><div class="line">        &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public static void parkUntil(Object blocker, long deadline) &#123;</div><div class="line">        Thread t = Thread.currentThread();</div><div class="line">        setBlocker(t, blocker);</div><div class="line">        UNSAFE.park(true, deadline);</div><div class="line">        setBlocker(t, null);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>参数：</p>
<ul>
<li>Object blocker：用于记录到线程中的parkBlocker对象。</li>
<li>nanos：在nanos时间后线程自动恢复挂起</li>
<li>deadline：在deadline时刻线程自动（这个毫秒其实就是自1970年1月1日0时起的毫秒数）</li>
</ul>
<p><strong>不带blocker参数的park方法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">public static void park() &#123;</div><div class="line">        UNSAFE.park(false, 0L);</div><div class="line">&#125;</div><div class="line"></div><div class="line">public static void parkNanos(long nanos) &#123;</div><div class="line">        if (nanos &gt; 0)</div><div class="line">            UNSAFE.park(false, nanos);</div><div class="line">&#125;</div><div class="line"></div><div class="line">public static void parkUntil(long deadline) &#123;</div><div class="line">        UNSAFE.park(true, deadline);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>没有做parkBlocker的赋值操作</li>
</ul>
<h3 id="以unpark开头的方法，用于解除阻塞"><a href="#以unpark开头的方法，用于解除阻塞" class="headerlink" title="以unpark开头的方法，用于解除阻塞"></a>以unpark开头的方法，用于解除阻塞</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public static void unpark(Thread thread) &#123;</div><div class="line">        if (thread != null)</div><div class="line">            UNSAFE.unpark(thread);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>park与unpark命令是成对出现的。unpark必须要在park命令后执行。但是线程的恢复并不一定要用unpark, 因为park的时间参数，有些情况下线程会自己恢复</p>
</blockquote>
<p><a href="https://my.oschina.net/readjava/blog/282882" target="_blank" rel="external">源码参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/线程笔记——AQS（AbstractQueuedSynchronizer）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/线程笔记——AQS（AbstractQueuedSynchronizer）/" itemprop="url">线程笔记——AQS（AbstractQueuedSynchronizer）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:39:35+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/多线程/" itemprop="url" rel="index">
                    <span itemprop="name">多线程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>AQS : <strong>java.util.concurrent.locks.AbstractQueuedSynchronizer</strong></p>
<p>研究java.util.concurrent并发包的突破口(例如: ReentrantLock核心是内部类Sync，然而Sync继承AQS)</p>
</blockquote>
<h2 id="AQS核心"><a href="#AQS核心" class="headerlink" title="AQS核心"></a>AQS核心</h2><blockquote>
<p><strong>通过一个共享变量来同步状态，变量的状态由子类去维护，</strong></p>
</blockquote>
<ul>
<li>线程阻塞队列的维护</li>
<li>线程阻塞和唤醒</li>
</ul>
<blockquote>
<p>共享变量的修改都是通过Unsafe类提供的CAS操作完成的<br>AbstractQueuedSynchronizer类的主要方法是acquire和release（模板方法）</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">protected boolean tryAcquire(int arg)</div><div class="line">protected boolean tryRelease(int arg)</div><div class="line">protected int tryAcquireShared(int arg)</div><div class="line">protected boolean tryReleaseShared(int arg)</div></pre></td></tr></table></figure>
<ul>
<li>acquire方法用来获取锁，返回true说明线程获取成功继续执行，一旦返回false则线程加入到等待队列中，等待被唤醒。</li>
<li>release方法用来释放锁。 一般来说实现的时候这两个方法被封装为lock和unlock方法。</li>
</ul>
<h2 id="AQS思路"><a href="#AQS思路" class="headerlink" title="AQS思路"></a>AQS思路</h2><blockquote>
<p>在获取锁时候，先判断当前状态是否允许获取锁，若是可以则获取锁，否则获取不成功。获取不成功则会阻塞，进入阻塞队列。而释放锁时，一般会修改状态位，唤醒队列中的阻塞线程</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170410103109328?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20170410103117469?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">    * 锁同步的基础Sync类</div><div class="line">    * AQS代表持有锁的数量</div><div class="line">    */</div><div class="line">   abstract static class Sync extends AbstractQueuedSynchronizer &#123;</div><div class="line">   </div><div class="line">       abstract void lock();</div><div class="line"></div><div class="line">       final boolean nonfairTryAcquire(int acquires) &#123;</div><div class="line">           final Thread current = Thread.currentThread();</div><div class="line">           int c = getState();</div><div class="line">           if (c == 0) &#123;</div><div class="line">               if (compareAndSetState(0, acquires)) &#123;</div><div class="line">                   setExclusiveOwnerThread(current);</div><div class="line">                   return true;</div><div class="line">               &#125;</div><div class="line">           &#125;</div><div class="line">           else if (current == getExclusiveOwnerThread()) &#123;</div><div class="line">               int nextc = c + acquires;</div><div class="line">               if (nextc &lt; 0) // overflow</div><div class="line">                   throw new Error(&quot;Maximum lock count exceeded&quot;);</div><div class="line">               setState(nextc);</div><div class="line">               return true;</div><div class="line">           &#125;</div><div class="line">           return false;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       protected final boolean tryRelease(int releases) &#123;</div><div class="line">           int c = getState() - releases;</div><div class="line">           if (Thread.currentThread() != getExclusiveOwnerThread())</div><div class="line">               throw new IllegalMonitorStateException();</div><div class="line">           boolean free = false;</div><div class="line">           if (c == 0) &#123;</div><div class="line">               free = true;</div><div class="line">               setExclusiveOwnerThread(null);</div><div class="line">           &#125;</div><div class="line">           setState(c);</div><div class="line">           return free;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       protected final boolean isHeldExclusively() &#123;</div><div class="line">           return getExclusiveOwnerThread() == Thread.currentThread();</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       final ConditionObject newCondition() &#123;</div><div class="line">           return new ConditionObject();</div><div class="line">       &#125;</div><div class="line"></div><div class="line">    </div><div class="line">       final Thread getOwner() &#123;</div><div class="line">           return getState() == 0 ? null : getExclusiveOwnerThread();</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       final int getHoldCount() &#123;</div><div class="line">           return isHeldExclusively() ? getState() : 0;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       final boolean isLocked() &#123;</div><div class="line">           return getState() != 0;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       private void readObject(java.io.ObjectInputStream s)</div><div class="line">           throws java.io.IOException, ClassNotFoundException &#123;</div><div class="line">           s.defaultReadObject();</div><div class="line">           setState(0); </div><div class="line">       &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a href="http://www.infoq.com/cn/articles/jdk1.8-abstractqueuedsynchronizer" target="_blank" rel="external">AQS概念理解</a><br><a href="http://ifeve.com/abstractqueuedsynchronizer-use/" target="_blank" rel="external">并发编程AQS参考</a><br><a href="http://www.cnblogs.com/zhanjindong/p/java-concurrent-package-aqs-overview.html" target="_blank" rel="external">AQS系列博文</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/【Java8】Guava——Predicate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/【Java8】Guava——Predicate/" itemprop="url">【Java8】Guava——Predicate</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:38:32+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Guava/" itemprop="url" rel="index">
                    <span itemprop="name">Guava</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Predicate"><a href="#Predicate" class="headerlink" title="Predicate"></a>Predicate</h2><p>Guava</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">@FunctionalInterface</div><div class="line">@GwtCompatible</div><div class="line">public interface Predicate&lt;T&gt; extends java.util.function.Predicate&lt;T&gt; &#123;</div><div class="line"> </div><div class="line">  @CanIgnoreReturnValue</div><div class="line">  boolean apply(@Nullable T input);</div><div class="line"></div><div class="line"> </div><div class="line">  @Override</div><div class="line">  boolean equals(@Nullable Object object);</div><div class="line"></div><div class="line">  @Override</div><div class="line">  default boolean test(@Nullable T input) &#123;</div><div class="line">    return apply(input);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>java8</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">@FunctionalInterface</div><div class="line">public interface Predicate&lt;T&gt; &#123;</div><div class="line"></div><div class="line">    boolean test(T t);</div><div class="line"></div><div class="line">    </div><div class="line">    default Predicate&lt;T&gt; and(Predicate&lt;? super T&gt; other) &#123;</div><div class="line">        Objects.requireNonNull(other);</div><div class="line">        return (t) -&gt; test(t) &amp;&amp; other.test(t);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    default Predicate&lt;T&gt; negate() &#123;</div><div class="line">        return (t) -&gt; !test(t);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    default Predicate&lt;T&gt; or(Predicate&lt;? super T&gt; other) &#123;</div><div class="line">        Objects.requireNonNull(other);</div><div class="line">        return (t) -&gt; test(t) || other.test(t);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    </div><div class="line">    static &lt;T&gt; Predicate&lt;T&gt; isEqual(Object targetRef) &#123;</div><div class="line">        return (null == targetRef)</div><div class="line">                ? Objects::isNull</div><div class="line">                : object -&gt; targetRef.equals(object);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>Predicate是简化版的Function。唯一的区别Predicate返回boolean</strong></p>
</blockquote>
<h3 id="简单实例"><a href="#简单实例" class="headerlink" title="简单实例"></a>简单实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Predicate&lt;String&gt; lengthLessThen10 = new Predicate&lt;String&gt;() &#123;</div><div class="line">    public boolean apply(String input) &#123;</div><div class="line">        return input.length() &lt; 10;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">lengthLessThen10.apply(&quot;lessThen10&quot;);//false</div></pre></td></tr></table></figure>
<p>相当于</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Function&lt;Integer, Predicate&lt;String&gt;&gt; lengthLessThen = new Function&lt;Integer, Predicate&lt;String&gt;&gt;() &#123;</div><div class="line">    public Predicate&lt;String&gt; apply(final Integer input) &#123;</div><div class="line">        return new Predicate&lt;String&gt;() &#123;</div><div class="line">            public boolean apply(String str) &#123;</div><div class="line">                return str.length() &lt; input;</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">lengthLessThen.apply(10).apply(&quot;lessThen10&quot;);//false</div></pre></td></tr></table></figure>
<blockquote>
<p>定义了一个 Function，接受 Integer 类型的参数，返回 Predicate 实例；在实例化 Predicate 的时候，我们访问了匿名类外部的变量，也即 Function 实例的 apply 方法的参数，由于 Java 语言的限制，匿名类内部用到的外部变量必须声明为 final</p>
</blockquote>
<h2 id="Predicates"><a href="#Predicates" class="headerlink" title="Predicates"></a>Predicates</h2><blockquote>
<p>Predicates 是 Guava 中与 Predicate 接口配套使用的工具类，提供了一些非常有用的工具类，比如使用 and 和 or 组合多个谓词，还有 not 将谓词的条件取反</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170410173435666?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><img src="http://img.blog.csdn.net/20170410173444323?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><a href="https://blog.jamespan.me/2015/03/30/guava-functional-programing-2" target="_blank" rel="external">Predicate具体参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/【Java8】Guava——Function/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/【Java8】Guava——Function/" itemprop="url">【Java8】Guava——Function</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:37:37+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Guava/" itemprop="url" rel="index">
                    <span itemprop="name">Guava</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="函数式编程"><a href="#函数式编程" class="headerlink" title="函数式编程"></a>函数式编程</h2><blockquote>
<p>函数式编程是一种历久弥新的编程范式，比起命令式编程，它更加关注程序的执行结果而不是执行过程。</p>
</blockquote>
<p>Java 始终是一个面向对象（命令式）的语言，在我们使用函数式编程这种黑魔法之前，需要确认：同样的功能，使用函数式编程来实现，能否在健壮性和可维护性上，超过使用面向对象（命令式）编程的实现？</p>
<h2 id="Function"><a href="#Function" class="headerlink" title="Function"></a>Function</h2><p><strong>实例化这个仿函数接口要求至少要实现 apply 方法。只有在需要判断两个函数是否等价的时候才覆盖实现 equals 方法</strong></p>
<p>Guava<br><img src="http://img.blog.csdn.net/20170410171245436?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>Java8</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@FunctionalInterface</div><div class="line">public interface Function&lt;T, R&gt;&#123;</div><div class="line">	</div><div class="line">	R apply(T t);</div><div class="line">	</div><div class="line">	default &lt;V&gt; Function&lt;V, R&gt; compose(Function&lt;? super V, ? extends T&gt; before) &#123;</div><div class="line">        Objects.requireNonNull(before);</div><div class="line">        return (V v) -&gt; apply(before.apply(v));</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    default &lt;V&gt; Function&lt;T, V&gt; andThen(Function&lt;? super R, ? extends V&gt; after) &#123;</div><div class="line">        Objects.requireNonNull(after);</div><div class="line">        return (T t) -&gt; after.apply(apply(t));</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    static &lt;T&gt; Function&lt;T, T&gt; identity() &#123;</div><div class="line">        return t -&gt; t;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="简单实例"><a href="#简单实例" class="headerlink" title="简单实例"></a>简单实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Function&lt;Double, Double&gt; sqrt = new Function&lt;Double, Double&gt;() &#123;</div><div class="line">    public Double apply(Double input) &#123;</div><div class="line">        return Math.sqrt(input);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">sqrt.apply(4.0);//2.0</div></pre></td></tr></table></figure>
<p>这里我们通过实例化一个匿名类的方式来完成了仿函数的定义、初始化和赋值。</p>
<p>注意到仿函数始终不是一个函数，而是一个对象，我们只能调用这个对象的方法来模拟函数调用。</p>
<p>这种 Function 接口的用法和函数式编程中将一个匿名函数赋值给变量的做法类似。当然，更加常见的函数定义方式是显式的声明一个函数然后实现它。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">class SqrtFunction implements Function&lt;Double, Double&gt; &#123;</div><div class="line">    public Double apply(Double input) &#123;</div><div class="line">        return Math.sqrt(input);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">new SqrtFunction().apply(4.0);//2.0</div></pre></td></tr></table></figure>
<h3 id="仅接收两个参数的函数"><a href="#仅接收两个参数的函数" class="headerlink" title="仅接收两个参数的函数"></a>仅接收两个参数的函数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Function&lt;SimpleEntry&lt;Double, Double&gt;, Double&gt; power</div><div class="line">        = new Function&lt;SimpleEntry&lt;Double, Double&gt;, Double&gt;() &#123;</div><div class="line">    public Double apply(SimpleEntry&lt;Double, Double&gt; input) &#123;</div><div class="line">        return Math.pow(input.getKey(), input.getValue());</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">power.apply(new SimpleEntry&lt;Double, Double&gt;(3.0, 2.0));//9.0</div></pre></td></tr></table></figure>
<h3 id="接收可变参数的函数"><a href="#接收可变参数的函数" class="headerlink" title="接收可变参数的函数"></a>接收可变参数的函数</h3><blockquote>
<p>由于变长参数实际上是 Java 编译器提供的语法糖，在编译期间会被解语法糖变成对象数组 Object[]，而且变长参数无法作为泛型参数，这里直接使用对象数组作为参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Function&lt;Double[], Double&gt; sum = new Function&lt;Double[], Double&gt;() &#123;</div><div class="line">    public Double apply(Double[] input) &#123;</div><div class="line">        Double result = 0.0;</div><div class="line">        for (Double element : input) &#123;</div><div class="line">            result += element;</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">sum.apply(new Double[]&#123;3.0, 4.0, 5.1&#125;);//12.1</div></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><p><img src="http://img.blog.csdn.net/20170410172300941?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>toStringFunction() : f(x)=x.toString()f(x)=x.toString() </li>
<li>identity()：f(x)=x</li>
<li>constanct() :  f(x)=a</li>
<li>compose() :  返回一个复合函数 h(x)=g(f(x))h(x)=g(f(x))，以两个函数为入参，返回这两个函数复合之后的函数。例如我们有函数 f:X→Yf:X→Y 和函数 g:Y→Zg:Y→Z，复合之后得到复合函数 g∘f:X→Z</li>
</ul>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">forMap(java.util.Map&lt;K,V&gt;)  //f(x)=map.get(x)</div><div class="line">forMap(java.util.Map&lt;K,? extends V&gt;, V) //区别在于这个方法的第二个参数是一个默认值，当映射中不包含入参键的时候，第一个方法返回的函数会抛出异常，而第二个方法返回的函数会返回默认值</div><div class="line">forPredicate() //以 Guava 的谓词实例为入参 返回一个 Function 实例</div><div class="line">forSupplier() //以 Guava 的 Supplier 实例为入参，返回一个 Function 实例</div></pre></td></tr></table></figure>
<p><a href="https://blog.jamespan.me/2015/03/22/guava-functional-programing-1" target="_blank" rel="external">Function更多参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/【Java8】Guava——Preconditions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/【Java8】Guava——Preconditions/" itemprop="url">【Java8】Guava——Preconditions</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:36:40+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Guava/" itemprop="url" rel="index">
                    <span itemprop="name">Guava</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Preconditions"><a href="#Preconditions" class="headerlink" title="Preconditions"></a>Preconditions</h2><blockquote>
<p>Precondition 是先决条件的意思，也叫前置条件，可以人为是使函数正常执行的参数需要满足的条件</p>
</blockquote>
<p>Preconditions 这个静态工厂中，Guava 为我们提供了一系列的静态方法，用于帮助我们在函数执行的开始检查参数，函数执行的过程中检查状态等等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Preconditions.checkArgument(5 &lt; 3);//IllegalArgumentException</div><div class="line">Preconditions.checkState(5 &lt; 3);//IllegalStateException</div><div class="line">Preconditions.checkNotNull(null);//NullPointerException</div><div class="line">Preconditions.checkElementIndex(4, 4);//IndexOutOfBoundsException</div><div class="line">Preconditions.checkPositionIndex(5, 4);//IndexOutOfBoundsException</div></pre></td></tr></table></figure>
<ul>
<li>checkArgument()</li>
<li>checkState()</li>
<li>checkNotNull()</li>
<li>checkElementIndex()</li>
<li>badElementIndex()</li>
<li>checkPositionIndex()</li>
<li>format()</li>
</ul>
<h2 id="Objects"><a href="#Objects" class="headerlink" title="Objects"></a>Objects</h2><p><img src="http://img.blog.csdn.net/20170410170630300?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h2 id="MoreObjects"><a href="#MoreObjects" class="headerlink" title="MoreObjects"></a>MoreObjects</h2><blockquote>
<p>从 Objects 中分裂出来的，主要剥离了内部类 ToStringHelper 以及一系列的包装函数<br><img src="http://img.blog.csdn.net/20170410170650027?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
</blockquote>
<h2 id="ComparisonChain"><a href="#ComparisonChain" class="headerlink" title="ComparisonChain"></a>ComparisonChain</h2><blockquote>
<p>ComparisonChain 可以帮助我们优雅地实现具有短回路功能链式比较</p>
</blockquote>
<p><a href="https://blog.jamespan.me/2015/03/10/guava-basic-utilities-4" target="_blank" rel="external">Precinditions更多参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/【Java8】Guava——Charsets/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/【Java8】Guava——Charsets/" itemprop="url">【Java8】Guava——Charsets</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:36:08+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Guava/" itemprop="url" rel="index">
                    <span itemprop="name">Guava</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Charsets"><a href="#Charsets" class="headerlink" title="Charsets"></a>Charsets</h2><blockquote>
<p>Charsets 是一个常量工厂，给出了 6 个Java 承诺了全平台支持的字符集，类似的静态工厂在 Apache 的类库中也有提供</p>
</blockquote>
<h2 id="Strings"><a href="#Strings" class="headerlink" title="Strings"></a>Strings</h2><h3 id="空字符串处理"><a href="#空字符串处理" class="headerlink" title="空字符串处理"></a>空字符串处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Strings.isNullOrEmpty(&quot;&quot;);//true</div><div class="line">Strings.nullToEmpty(null);//&quot;&quot;</div><div class="line">Strings.nullToEmpty(&quot;abc&quot;);//&quot;abc&quot;</div><div class="line">Strings.emptyToNull(&quot;&quot;);//null</div><div class="line">Strings.emptyToNull(&quot;abc&quot;);//&quot;abc&quot;</div></pre></td></tr></table></figure>
<h3 id="拼接字符串"><a href="#拼接字符串" class="headerlink" title="拼接字符串"></a>拼接字符串</h3><p>前后拼接同一个字符直到达到某个长度，或者重复拼接自身 n 次<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Strings.padStart(&quot;7&quot;, 3, &apos;0&apos;);//&quot;007&quot;</div><div class="line">Strings.padStart(&quot;2010&quot;, 3, &apos;0&apos;);//&quot;2010&quot;</div><div class="line">Strings.padEnd(&quot;4.&quot;, 5, &apos;0&apos;);//&quot;4.000&quot;</div><div class="line">Strings.padEnd(&quot;2010&quot;, 3, &apos;!&apos;);//&quot;2010&quot;</div><div class="line">Strings.repeat(&quot;hey&quot;, 3);//&quot;heyheyhey&quot;</div></pre></td></tr></table></figure></p>
<h3 id="查找两个字符串的公共前缀、后缀"><a href="#查找两个字符串的公共前缀、后缀" class="headerlink" title="查找两个字符串的公共前缀、后缀"></a>查找两个字符串的公共前缀、后缀</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Strings.commonPrefix(&quot;aaab&quot;, &quot;aac&quot;);//&quot;aa&quot;</div><div class="line">Strings.commonSuffix(&quot;aaac&quot;, &quot;aac&quot;);//&quot;aac&quot;</div></pre></td></tr></table></figure>
<p><a href="https://blog.jamespan.me/2015/03/01/guava-basic-utilities-3" target="_blank" rel="external">Charsets更多参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/05/【Java8】Guava——Splitter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="dzx">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dzxblog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/【Java8】Guava——Splitter/" itemprop="url">【Java8】Guava——Splitter</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:34:09+08:00">
                2017-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Guava/" itemprop="url" rel="index">
                    <span itemprop="name">Guava</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Splitter"><a href="#Splitter" class="headerlink" title="Splitter"></a>Splitter</h2><blockquote>
<p>Guava 提供了 Joiner 类用于将多个对象拼接成字符串，如果我们需要一个反向的操作，就要用到 Splitter 类。Splitter 能够将一个字符串按照指定的分隔符拆分成可迭代遍历的字符串集</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170410161021973?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjA1OTc0Nzk=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="简单实例"><a href="#简单实例" class="headerlink" title="简单实例"></a>简单实例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Splitter.on(&apos; &apos;).split(&quot;四川省 成都市 金牛区&quot;).toString()</div></pre></td></tr></table></figure>
<p>result</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[四川省, 成都市, 金牛区]</div></pre></td></tr></table></figure>
<h3 id="支持正则表达式"><a href="#支持正则表达式" class="headerlink" title="支持正则表达式"></a>支持正则表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Splitter.onPattern(&quot;\\s+&quot;).split(&quot;四川省  \t   成都市 金牛区&quot;).toString()</div></pre></td></tr></table></figure>
<p>result</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[四川省, 成都市, 金牛区]</div></pre></td></tr></table></figure>
<h3 id="根据长度拆分字符串"><a href="#根据长度拆分字符串" class="headerlink" title="根据长度拆分字符串"></a>根据长度拆分字符串</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Splitter.fixedLength(11).split(&quot;四川省 成都市 金牛区&quot;).toString()</div></pre></td></tr></table></figure>
<p>result</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[四川省, 成都市, 金牛区]</div></pre></td></tr></table></figure>
<h2 id="Splitter-MapSplitter"><a href="#Splitter-MapSplitter" class="headerlink" title="Splitter.MapSplitter"></a>Splitter.MapSplitter</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">与 Joiner.MapJoiner 相对，Splitter.MapSplitter 用来拆分被拼接了的 Map 对象，返回 Map&lt;String, String&gt;。</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Map&lt;String,String&gt; map = Splitter.on(&quot; &quot;).withKeyValueSeparator(&quot;=&quot;).split(&quot;userName=Nimo phone=123 address=浙江省杭州市滨江区XXXX&quot;);</div><div class="line">map.toString();</div></pre></td></tr></table></figure>
<p>result</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;userName=Nimo, phone=123, address=浙江省杭州市滨江区XXXX&#125;</div></pre></td></tr></table></figure>
<p><a href="https://blog.jamespan.me/2015/02/09/guava-basic-utilities-2" target="_blank" rel="external">Splitter具体参考</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://wx2.sinaimg.cn/mw690/63b4ac8dgy1ffzs5lll1oj20zk0qoq4z.jpg"
               alt="dzx" />
          <p class="site-author-name" itemprop="name">dzx</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">93</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">32</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">78</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dzx</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
